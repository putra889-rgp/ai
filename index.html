<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Owner & Member Dashboard</title>
  <style>
    body {font-family: Arial, sans-serif;background:#0d1117;color:#e6edf3;margin:0;padding:0;}
    header {background:#161b22;padding:15px;text-align:center;font-size:1.3em;}
    .container{display:none;padding:20px;}
    .login-box,.member-box{display:flex;flex-direction:column;gap:10px;background:#161b22;padding:20px;border-radius:12px;max-width:340px;margin:50px auto;box-shadow:0 0 12px rgba(0,0,0,0.5);text-align:center;}
    input,button,textarea{padding:10px;border:none;border-radius:8px;outline:none;}
    button{background:#238636;color:white;cursor:pointer;transition:0.3s;}
    button:hover{background:#2ea043;}
    .btn-logout{background:#da3633;}
    .btn-logout:hover{background:#f85149;}
    .section{background:#161b22;padding:15px;border-radius:10px;margin-bottom:15px;}
    textarea{width:100%;height:100px;background:#0d1117;color:#e6edf3;border-radius:8px;border:1px solid #30363d;padding:10px;}
  </style>
</head>
<body>

<header>üîê Owner & Member Dashboard</header>

<!-- Pilihan Masuk -->
<div class="member-box" id="chooseRole">
  <h3>Selamat Datang</h3>
  <button onclick="showLogin()">Masuk sebagai Owner</button>
  <button onclick="enterMember()">Masuk sebagai Member</button>
</div>

<!-- Login Owner -->
<div class="login-box" id="loginOwner">
  <h3>Login Owner</h3>
  <input type="text" id="ownerUser" placeholder="Username">
  <input type="password" id="ownerPass" placeholder="Password">
  <button onclick="loginOwner()">Login</button>
  <button class="btn-logout" onclick="backHome()">Kembali</button>
</div>

<!-- Dashboard Owner -->
<div class="container" id="ownerDashboard">
  <h2>üìä Dashboard Owner</h2>
  <div class="section">Jumlah Member sudah akses: <b id="memberCount">0</b></div>

  <div class="section">
    <h3>üîë Generate Token</h3>
    <button onclick="generateToken()">Buat Token</button>
    <p id="tokenResult"></p>
  </div>

  <div class="section">
    <h3>üïµÔ∏è Lookup NIK</h3>
    <input type="text" id="nikInputOwner" placeholder="Masukkan NIK">
    <button onclick="lookupNIK('Owner')">Cek</button>
    <p id="nikResultOwner"></p>
  </div>

  <div class="section">
    <h3>üìû Cek Nomor</h3>
    <input type="text" id="noInputOwner" placeholder="Masukkan Nomor HP">
    <button onclick="cekNo('Owner')">Cek</button>
    <p id="noResultOwner"></p>
  </div>

  <div class="section">
    <h3>üåê Tracker Link Generator</h3>
    <input type="text" id="redirectOwner" placeholder="Redirect ke URL">
    <button onclick="generateTracker('Owner')">Buat Link</button>
    <textarea id="trackerOwner" readonly></textarea>
  </div>

  <button class="btn-logout" onclick="logout()">Logout</button>
</div>

<!-- Dashboard Member -->
<div class="container" id="memberDashboard">
  <h2>üë• Dashboard Member</h2>

  <div class="section">
    <h3>üïµÔ∏è Lookup NIK</h3>
    <input type="text" id="nikInputMember" placeholder="Masukkan NIK">
    <button onclick="lookupNIK('Member')">Cek</button>
    <p id="nikResultMember"></p>
  </div>

  <div class="section">
    <h3>üìû Cek Nomor</h3>
    <input type="text" id="noInputMember" placeholder="Masukkan Nomor HP">
    <button onclick="cekNo('Member')">Cek</button>
    <p id="noResultMember"></p>
  </div>

  <div class="section">
    <h3>üåê Tracker Link Generator</h3>
    <input type="text" id="redirectMember" placeholder="Redirect ke URL">
    <button onclick="generateTracker('Member')">Buat Link</button>
    <textarea id="trackerMember" readonly></textarea>
  </div>

  <button class="btn-logout" onclick="logout()">Keluar</button>
</div>

<script>
  // === CONFIG OWNER ===
  const OWNER_USER = "admin";
  const OWNER_PASS = "1234";

  // === LOGIN FLOW ===
  function showLogin(){document.getElementById("chooseRole").style.display="none";document.getElementById("loginOwner").style.display="flex";}
  function backHome(){document.getElementById("loginOwner").style.display="none";document.getElementById("chooseRole").style.display="flex";}
  function loginOwner(){
    let u=document.getElementById("ownerUser").value, p=document.getElementById("ownerPass").value;
    if(u===OWNER_USER && p===OWNER_PASS){localStorage.setItem("role","owner");showDashboard();}else{alert("Username/password salah!");}
  }
  function enterMember(){localStorage.setItem("role","member");incrementMemberCount();showDashboard();}

  function showDashboard(){
    document.querySelectorAll(".container,.login-box,.member-box").forEach(e=>e.style.display="none");
    let role=localStorage.getItem("role");
    if(role==="owner"){document.getElementById("ownerDashboard").style.display="block";updateMemberCount();}
    else if(role==="member"){document.getElementById("memberDashboard").style.display="block";}
    else{document.getElementById("chooseRole").style.display="flex";}
  }
  function logout(){localStorage.removeItem("role");showDashboard();}

  // === MEMBER COUNTER ===
  function incrementMemberCount(){let c=parseInt(localStorage.getItem("memberCount")||"0");c++;localStorage.setItem("memberCount",c);}
  function updateMemberCount(){document.getElementById("memberCount").innerText=localStorage.getItem("memberCount")||"0";}

  // === FITUR: GENERATE TOKEN ===
  function generateToken(){let t="TOKEN-"+Math.random().toString(36).substr(2,8).toUpperCase();document.getElementById("tokenResult").innerText=t;}

  // === FITUR: LOOKUP NIK (simulasi) ===
  function lookupNIK(role){
    let nik=document.getElementById("nikInput"+role).value;
    if(nik.length<8){alert("NIK tidak valid");return;}
    let tgl=nik.substr(6,2), bln=nik.substr(4,2), thn="19"+nik.substr(2,2);
    let gender=(parseInt(tgl)>40)?"Perempuan":"Laki-Laki";if(gender==="Perempuan")tgl=parseInt(tgl)-40;
    let kota=["Jakarta","Bandung","Surabaya","Medan","Makassar","Yogyakarta"];
    let hasil=`Tanggal Lahir: ${tgl}-${bln}-${thn}, Kelamin: ${gender}, Kota: ${kota[Math.floor(Math.random()*kota.length)]}`;
    document.getElementById("nikResult"+role).innerText=hasil;
  }

  // === FITUR: CEK NOMOR (simulasi) ===
  function cekNo(role){
    let no=document.getElementById("noInput"+role).value;
    let provider="Tidak diketahui";
    if(no.startsWith("0812")||no.startsWith("0813"))provider="Telkomsel";
    else if(no.startsWith("0857")||no.startsWith("0856"))provider="Indosat";
    else if(no.startsWith("0817")||no.startsWith("0818"))provider="XL";
    let status=(Math.random()>0.5)?"Aktif":"Tidak Aktif";
    document.getElementById("noResult"+role).innerText=`Provider: ${provider}, Status: ${status}`;
  }

  // === FITUR: TRACKER LINK ===
  function generateTracker(role){
    let url=document.getElementById("redirect"+role).value||"https://google.com";
    let tracker=window.location.origin+window.location.pathname+"?redirect="+encodeURIComponent(url);
    document.getElementById("tracker"+role).value=tracker;
  }

  // Jalankan awal
  showDashboard();
</script>

</body>
</html>
